{"version":3,"sources":["../src/plugin.js"],"names":["applyOnEach","$el","callback","each","cropit","data","callOnFirst","method","options","first","isFunction","methods","init","destroy","removeData","isZoomable","export","delegate","fnName","prop","name","value","fn","apply","Array","prototype","slice","call","arguments","indexOf"],"mappings":"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","file":"plugin.js","sourcesContent":["import $ from 'jquery';\n\nimport Cropit from './cropit';\nimport { PLUGIN_KEY } from './constants';\nimport { exists } from './utils';\n\nconst applyOnEach = ($el, callback) => {\n  return $el.each(function() {\n    const cropit = $.data(this, PLUGIN_KEY);\n\n    if (!cropit) { return; }\n    callback(cropit);\n  });\n};\n\nconst callOnFirst = ($el, method, options) => {\n  const cropit = $el.first().data(PLUGIN_KEY);\n\n  if (!cropit || !$.isFunction(cropit[method])) { return null; }\n  return cropit[method](options);\n};\n\nconst methods = {\n  init(options) {\n    return this.each(function() {\n      // Only instantiate once per element\n      if ($.data(this, PLUGIN_KEY)) { return; }\n\n      const cropit = new Cropit($, this, options);\n      $.data(this, PLUGIN_KEY, cropit);\n    });\n  },\n\n  destroy() {\n    return this.each(function() {\n      $.removeData(this, PLUGIN_KEY);\n    });\n  },\n\n  isZoomable() {\n    return callOnFirst(this, 'isZoomable');\n  },\n\n  export(options) {\n    return callOnFirst(this, 'getCroppedImageData', options);\n  },\n};\n\nconst delegate = ($el, fnName) => {\n  return applyOnEach($el, (cropit) => {\n    cropit[fnName]();\n  });\n};\n\nconst prop = ($el, name, value) => {\n  if (exists(value)) {\n    return applyOnEach($el, (cropit) => {\n      cropit[name] = value;\n    });\n  }\n  else {\n    const cropit = $el.first().data(PLUGIN_KEY);\n    return cropit[name];\n  }\n};\n\n$.fn.cropit = function(method) {\n  if (methods[method]) {\n    return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n  }\n  else if (['imageState', 'imageSrc', 'offset', 'previewSize', 'imageSize', 'zoom',\n            'initialZoom', 'exportZoom', 'minZoom', 'maxZoom'].indexOf(method) >= 0) {\n    return prop(this, ...arguments);\n  }\n  else if (['rotateCW', 'rotateCCW', 'disable', 'reenable'].indexOf(method) >= 0) {\n    return delegate(this, ...arguments);\n  }\n  else {\n    return methods.init.apply(this, arguments);\n  }\n};\n"]}