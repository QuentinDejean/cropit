{"version":3,"sources":["../src/zoomer.js"],"names":["Zoomer","minZoom","maxZoom","imageSize","previewSize","exportZoom","smallImage","widthRatio","width","heightRatio","height","Math","min","max","sliderPos","zoom"],"mappings":";;;;;;;;;;IAAMA,M;AACJ,oBAAc;AAAA;;AACZ,SAAKC,OAAL,GAAe,KAAKC,OAAL,GAAe,CAA9B;AACD;;;;gCAE2E;AAAA,UAApEC,SAAoE,QAApEA,SAAoE;AAAA,UAAzDC,WAAyD,QAAzDA,WAAyD;AAAA,UAA5CC,UAA4C,QAA5CA,UAA4C;AAAA,UAAhCH,OAAgC,QAAhCA,OAAgC;AAAA,UAAvBD,OAAuB,QAAvBA,OAAuB;AAAA,UAAdK,UAAc,QAAdA,UAAc;;AAC1E,UAAMC,aAAaH,YAAYI,KAAZ,GAAoBL,UAAUK,KAAjD;AACA,UAAMC,cAAcL,YAAYM,MAAZ,GAAqBP,UAAUO,MAAnD;;AAEA,UAAIT,YAAY,KAAhB,EAAuB;AACrB,aAAKA,OAAL,GAAeU,KAAKC,GAAL,CAASL,UAAT,EAAqBE,WAArB,CAAf;AACD,OAFD,MAGK;AACH,aAAKR,OAAL,GAAeU,KAAKE,GAAL,CAASN,UAAT,EAAqBE,WAArB,CAAf;AACD;;AAED,UAAIH,eAAe,OAAnB,EAA4B;AAC1B,aAAKL,OAAL,GAAeU,KAAKC,GAAL,CAAS,KAAKX,OAAd,EAAuB,CAAvB,CAAf;AACD;;AAED,WAAKC,OAAL,GAAeS,KAAKE,GAAL,CAAS,KAAKZ,OAAd,EAAuBC,UAAUG,UAAjC,CAAf;AACD;;;4BAEOS,S,EAAW;AACjB,UAAI,CAAC,KAAKb,OAAN,IAAiB,CAAC,KAAKC,OAA3B,EAAoC;AAAE,eAAO,IAAP;AAAc;;AAEpD,aAAOY,aAAa,KAAKZ,OAAL,GAAe,KAAKD,OAAjC,IAA4C,KAAKA,OAAxD;AACD;;;iCAEYc,I,EAAM;AACjB,UAAI,CAAC,KAAKd,OAAN,IAAiB,CAAC,KAAKC,OAA3B,EAAoC;AAAE,eAAO,IAAP;AAAc;;AAEpD,UAAI,KAAKD,OAAL,KAAiB,KAAKC,OAA1B,EAAmC;AACjC,eAAO,CAAP;AACD,OAFD,MAGK;AACH,eAAO,CAACa,OAAO,KAAKd,OAAb,KAAyB,KAAKC,OAAL,GAAe,KAAKD,OAA7C,CAAP;AACD;AACF;;;iCAEY;AACX,UAAI,CAAC,KAAKA,OAAN,IAAiB,CAAC,KAAKC,OAA3B,EAAoC;AAAE,eAAO,IAAP;AAAc;;AAEpD,aAAO,KAAKD,OAAL,KAAiB,KAAKC,OAA7B;AACD;;;4BAEOa,I,EAAM;AACZ,aAAOJ,KAAKE,GAAL,CAAS,KAAKZ,OAAd,EAAuBU,KAAKC,GAAL,CAAS,KAAKV,OAAd,EAAuBa,IAAvB,CAAvB,CAAP;AACD;;;;;;kBAGYf,M","file":"zoomer.js","sourcesContent":["class Zoomer {\n  constructor() {\n    this.minZoom = this.maxZoom = 1;\n  }\n\n  setup({ imageSize, previewSize, exportZoom, maxZoom, minZoom, smallImage }) {\n    const widthRatio = previewSize.width / imageSize.width;\n    const heightRatio = previewSize.height / imageSize.height;\n\n    if (minZoom === 'fit') {\n      this.minZoom = Math.min(widthRatio, heightRatio);\n    }\n    else {\n      this.minZoom = Math.max(widthRatio, heightRatio);\n    }\n\n    if (smallImage === 'allow') {\n      this.minZoom = Math.min(this.minZoom, 1);\n    }\n\n    this.maxZoom = Math.max(this.minZoom, maxZoom / exportZoom);\n  }\n\n  getZoom(sliderPos) {\n    if (!this.minZoom || !this.maxZoom) { return null; }\n\n    return sliderPos * (this.maxZoom - this.minZoom) + this.minZoom;\n  }\n\n  getSliderPos(zoom) {\n    if (!this.minZoom || !this.maxZoom) { return null; }\n\n    if (this.minZoom === this.maxZoom) {\n      return 0;\n    }\n    else {\n      return (zoom - this.minZoom) / (this.maxZoom - this.minZoom);\n    }\n  }\n\n  isZoomable() {\n    if (!this.minZoom || !this.maxZoom) { return null; }\n\n    return this.minZoom !== this.maxZoom;\n  }\n\n  fixZoom(zoom) {\n    return Math.max(this.minZoom, Math.min(this.maxZoom, zoom));\n  }\n}\n\nexport default Zoomer;\n"]}